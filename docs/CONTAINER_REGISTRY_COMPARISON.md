# ğŸ³ Container Registry ë¹„êµ (ì‹¤ë¬´ ê´€ì )

**í•µì‹¬ ì§ˆë¬¸**: S3ì— ì €ì¥ ì•ˆ í•˜ê³  GHCR ì“°ëŠ” ì´ìœ ? ì‹¤ë¬´ì—ì„œë„ ì´ë ‡ê²Œ í•˜ë‚˜?

---

## âŒ S3ëŠ” Docker ì´ë¯¸ì§€ ì €ì¥ì†Œê°€ ì•„ë‹™ë‹ˆë‹¤!

### S3 vs Container Registry

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ S3 (Simple Storage Service)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ìš©ë„: íŒŒì¼/ê°ì²´ ì €ì¥ì†Œ                                       â”‚
â”‚ ì €ì¥: .zip, .tar, .pdf, .jpg ë“± ëª¨ë“  íŒŒì¼                    â”‚
â”‚ í”„ë¡œí† ì½œ: HTTP/HTTPS (REST API)                              â”‚
â”‚ Docker: âŒ docker pull ëª…ë ¹ ì§ì ‘ ì§€ì› ì•ˆí•¨                   â”‚
â”‚                                                             â”‚
â”‚ ì˜ˆì‹œ:                                                        â”‚
â”‚   âœ“ ë¡œê·¸ íŒŒì¼ ì €ì¥                                           â”‚
â”‚   âœ“ ë°±ì—… íŒŒì¼ ì €ì¥                                           â”‚
â”‚   âœ“ ì •ì  ì›¹ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ…                                     â”‚
â”‚   âœ— Docker ì´ë¯¸ì§€ ì €ì¥ (ë¹„ì¶”ì²œ)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Container Registry (ECR, GHCR, Docker Hub ë“±)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ìš©ë„: Docker/Container ì´ë¯¸ì§€ ì „ìš© ì €ì¥ì†Œ                    â”‚
â”‚ ì €ì¥: Docker ì´ë¯¸ì§€ (ë ˆì´ì–´ ê¸°ë°˜)                            â”‚
â”‚ í”„ë¡œí† ì½œ: Docker Registry API v2                             â”‚
â”‚ Docker: âœ… docker pull/push ëª…ë ¹ ë„¤ì´í‹°ë¸Œ ì§€ì›               â”‚
â”‚                                                             â”‚
â”‚ í•µì‹¬ ê¸°ëŠ¥:                                                   â”‚
â”‚   âœ“ ì´ë¯¸ì§€ ë ˆì´ì–´ ìºì‹± (ì¤‘ë³µ ì œê±°)                           â”‚
â”‚   âœ“ íƒœê·¸ ê´€ë¦¬ (latest, v1.0, previous ë“±)                   â”‚
â”‚   âœ“ ì´ë¯¸ì§€ ìŠ¤ìº” (ë³´ì•ˆ ì·¨ì•½ì  ê²€ì‚¬)                           â”‚
â”‚   âœ“ ì´ë¯¸ì§€ ì„œëª… (ë¬´ê²°ì„± ê²€ì¦)                                â”‚
â”‚   âœ“ ì ‘ê·¼ ì œì–´ (IAM, Token)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### S3ì— Docker ì´ë¯¸ì§€ ì €ì¥í•˜ë©´?

```bash
# âŒ ì´ë ‡ê²ŒëŠ” ì•ˆë©ë‹ˆë‹¤!
docker pull s3://my-bucket/my-image:latest
# Error: invalid reference format

# S3ì— ì €ì¥í•˜ë ¤ë©´ ìˆ˜ë™ ì‘ì—… í•„ìš”
docker save my-image:latest > image.tar
aws s3 cp image.tar s3://my-bucket/

# ì‚¬ìš©í•˜ë ¤ë©´ ë‹¤ì‹œ ìˆ˜ë™ ì‘ì—…
aws s3 cp s3://my-bucket/image.tar .
docker load < image.tar

# ë„ˆë¬´ ë¶ˆí¸í•¨! âŒ
```

---

## ğŸ¢ ì‹¤ë¬´ì—ì„œëŠ” ì–´ë–»ê²Œ í•˜ë‚˜?

### 1. AWS í™˜ê²½ â†’ ECR (Elastic Container Registry) ì£¼ë¡œ ì‚¬ìš© â­

```
ì‹¤ë¬´ ì‹œë‚˜ë¦¬ì˜¤ 1: AWS í’€ìŠ¤íƒ

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Production Setup                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  GitHub Actions                                     â”‚
â”‚       â†“                                             â”‚
â”‚  Build Docker Image                                 â”‚
â”‚       â†“                                             â”‚
â”‚  Push to ECR â­                                      â”‚
â”‚       â†“                                             â”‚
â”‚  ECS/EKS/EC2 pulls from ECR                         â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì™œ ECR?
âœ… AWS ë„¤ì´í‹°ë¸Œ (IAM í†µí•©, VPC Endpoint ì§€ì›)
âœ… ê°™ì€ ë¦¬ì „ ë‚´ ë¹ ë¥¸ ì „ì†¡ (ë¦¬ì „ ë‚´ ë¬´ë£Œ!)
âœ… ECS/EKSì™€ ì™„ë²½ í†µí•©
âœ… ì´ë¯¸ì§€ ìŠ¤ìº” (ë³´ì•ˆ ì·¨ì•½ì  ìë™ ê²€ì‚¬)
âœ… ì´ë¯¸ì§€ ë¼ì´í”„ì‚¬ì´í´ ì •ì±… (ìë™ ì •ë¦¬)
âœ… í”„ë¼ì´ë¹— ë„¤íŠ¸ì›Œí¬ ì§€ì› (VPC Endpoint)

ë‹¨ì :
âš ï¸ ë¹„ìš© ë°œìƒ ($0.10/GB/ì›”, ì €ì¥)
âš ï¸ ë°ì´í„° ì „ì†¡ ë¹„ìš© (ë¦¬ì „ ê°„ ì „ì†¡ ì‹œ)
```

### 2. GitHub Actions ì‚¬ìš© â†’ GHCR í¸ë¦¬ (í˜„ì¬ í”„ë¡œì íŠ¸) â­

```
ì‹¤ë¬´ ì‹œë‚˜ë¦¬ì˜¤ 2: GitHub ì¤‘ì‹¬ ì›Œí¬í”Œë¡œìš°

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Startup/Small Team Setup                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  GitHub Actions                                     â”‚
â”‚       â†“                                             â”‚
â”‚  Build Docker Image                                 â”‚
â”‚       â†“                                             â”‚
â”‚  Push to GHCR â­ (GitHub Container Registry)        â”‚
â”‚       â†“                                             â”‚
â”‚  EC2/Cloud Run pulls from GHCR                      â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì™œ GHCR?
âœ… GitHub Token ìë™ ì¸ì¦ (GITHUB_TOKEN)
âœ… ë¬´ë£Œ! (Public repo ë¬´ì œí•œ, Private 500MB)
âœ… GitHub Actionsì™€ ì™„ë²½ í†µí•©
âœ… ì„¤ì • ê°„ë‹¨ (í•œ ì¤„ì´ë©´ ë¨)
âœ… GitHub ì½”ë“œì™€ ì´ë¯¸ì§€ í•œ ê³³ ê´€ë¦¬

ë‹¨ì :
âš ï¸ AWS ë¦¬ì „ ë°–ì— ìˆìŒ (ì „ì†¡ ì‹œê°„ ëŠë¦´ ìˆ˜ ìˆìŒ)
âš ï¸ VPC Endpoint ì§€ì› ì•ˆí•¨
âš ï¸ AWS IAM í†µí•© ì•ˆë¨
```

### 3. í° íšŒì‚¬/ì—”í„°í”„ë¼ì´ì¦ˆ â†’ Private Registry (Harbor, Nexus)

```
ì‹¤ë¬´ ì‹œë‚˜ë¦¬ì˜¤ 3: ëŒ€ê¸°ì—…/ê¸ˆìœµê¶Œ

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Enterprise Setup                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  Jenkins/GitLab CI                                  â”‚
â”‚       â†“                                             â”‚
â”‚  Build Docker Image                                 â”‚
â”‚       â†“                                             â”‚
â”‚  Push to Harbor â­ (Self-hosted)                    â”‚
â”‚       â†“                                             â”‚
â”‚  Kubernetes pulls from Harbor                       â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì™œ Self-hosted?
âœ… ì™„ì „í•œ í†µì œê¶Œ (ë³´ì•ˆ, ê°ì‚¬)
âœ… On-premise ì§€ì› (ì™¸ë¶€ ì˜ì¡´ ì—†ìŒ)
âœ… ì´ë¯¸ì§€ ë³µì œ (ë©€í‹° ë¦¬ì „)
âœ… RBAC (Role-Based Access Control)
âœ… ì´ë¯¸ì§€ ì„œëª… (Notary)

ë‹¨ì :
âš ï¸ ìš´ì˜ ë¶€ë‹´ (ì„œë²„ ê´€ë¦¬, ì—…ë°ì´íŠ¸)
âš ï¸ ì´ˆê¸° ë¹„ìš© (ì„œë²„ êµ¬ì¶•)
```

---

## ğŸ“Š Container Registry ë¹„êµí‘œ

| Registry | ì œê³µì | ë¹„ìš© | AWS í†µí•© | ì‹¤ë¬´ ì‚¬ìš©ë¥  | ì¶”ì²œ ëŒ€ìƒ |
|----------|--------|------|----------|------------|-----------|
| **ECR** | AWS | ìœ ë£Œ ($0.10/GB) | â­â­â­â­â­ | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ | AWS í™˜ê²½ í•„ìˆ˜ |
| **GHCR** | GitHub | ë¬´ë£Œ* | â­â­â˜†â˜†â˜† | ğŸ”¥ğŸ”¥ğŸ”¥â˜†â˜† | ìŠ¤íƒ€íŠ¸ì—…, ì˜¤í”ˆì†ŒìŠ¤ |
| **Docker Hub** | Docker | ë¬´ë£Œ* | â­â˜†â˜†â˜†â˜† | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥â˜† | ê°œì¸, ê³µê°œ ì´ë¯¸ì§€ |
| **GCR** | Google | ìœ ë£Œ | â­â˜†â˜†â˜†â˜† | ğŸ”¥ğŸ”¥ğŸ”¥â˜†â˜† | GCP í™˜ê²½ |
| **ACR** | Azure | ìœ ë£Œ | â­â˜†â˜†â˜†â˜† | ğŸ”¥ğŸ”¥â˜†â˜†â˜† | Azure í™˜ê²½ |
| **Harbor** | CNCF | ë¬´ë£Œ (ìš´ì˜ë¹„ìš©) | â­â­â­â˜†â˜† | ğŸ”¥ğŸ”¥ğŸ”¥â˜†â˜† | ì—”í„°í”„ë¼ì´ì¦ˆ |
| **Nexus** | Sonatype | ë¬´ë£Œ/ìœ ë£Œ | â­â­â˜†â˜†â˜† | ğŸ”¥ğŸ”¥â˜†â˜†â˜† | ë©€í‹° ì €ì¥ì†Œ í†µí•© |

*ë¬´ë£Œ: Public repo ë˜ëŠ” ì œí•œì  ìš©ëŸ‰

---

## ğŸ’° ë¹„ìš© ë¹„êµ (ì‹¤ì œ ì˜ˆì‹œ)

### ì‹œë‚˜ë¦¬ì˜¤: Docker ì´ë¯¸ì§€ 500MB, 10ê°œ ë²„ì „ ìœ ì§€, ì›” 1000íšŒ pull

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ECR (AWS)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì €ì¥: 500MB Ã— 10 = 5GB                              â”‚
â”‚   â†’ $0.10/GB Ã— 5GB = $0.50/ì›”                       â”‚
â”‚                                                     â”‚
â”‚ ì „ì†¡ (ê°™ì€ ë¦¬ì „):                                    â”‚
â”‚   â†’ $0 (ë¦¬ì „ ë‚´ ë¬´ë£Œ!)                               â”‚
â”‚                                                     â”‚
â”‚ ì „ì†¡ (ë‹¤ë¥¸ ë¦¬ì „):                                    â”‚
â”‚   â†’ 500MB Ã— 1000 = 500GB                            â”‚
â”‚   â†’ $0.02/GB Ã— 500GB = $10/ì›”                       â”‚
â”‚                                                     â”‚
â”‚ ì´: $0.50 ~ $10.50/ì›”                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GHCR (GitHub)                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Public Repo:                                        â”‚
â”‚   ì €ì¥: ë¬´ì œí•œ ë¬´ë£Œ! âœ…                              â”‚
â”‚   ì „ì†¡: ë¬´ì œí•œ ë¬´ë£Œ! âœ…                              â”‚
â”‚   ì´: $0/ì›”                                          â”‚
â”‚                                                     â”‚
â”‚ Private Repo:                                       â”‚
â”‚   ì €ì¥: 500MB ë¬´ë£Œ, ì´ˆê³¼ $0.25/GB                   â”‚
â”‚   â†’ (5GB - 0.5GB) Ã— $0.25 = $1.125/ì›”               â”‚
â”‚   ì „ì†¡: ë¬´ë£Œ (1GB ì´ìƒë„ ë¬´ë£Œ)                       â”‚
â”‚   ì´: ~$1.13/ì›”                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê²°ë¡ : Public repoë©´ GHCRì´ ì••ë„ì ìœ¼ë¡œ ì €ë ´!
      Private + AWS í™˜ê²½ì´ë©´ ECRì´ ë” ë‚˜ìŒ (í†µí•©ì„±)
```

---

## ğŸ¯ í˜„ì¬ í”„ë¡œì íŠ¸ê°€ GHCR ì“°ëŠ” ì´ìœ 

```
í˜„ì¬ ìƒí™©:
âœ… GitHub Actions ì‚¬ìš© ì¤‘
âœ… Public Repository
âœ… 5ì¼ê°„ë§Œ ìš´ì˜ (ë¹„ìš© ë¯¼ê°)
âœ… AWS IAM ë³µì¡ë„ í”¼í•˜ê³  ì‹¶ìŒ
âœ… ë¹ ë¥¸ êµ¬ì¶• ìš°ì„ 

â†’ GHCRì´ ìµœì !

ë§Œì•½ ì´ë¬ë‹¤ë©´ ECR ì¼ì„ ê²ƒ:
- í”„ë¡œë•ì…˜ ì¥ê¸° ìš´ì˜
- AWS ì „ìš© í™˜ê²½
- VPC ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼
- ë³´ì•ˆ ì»´í”Œë¼ì´ì–¸ìŠ¤ ìš”êµ¬
- ì´ë¯¸ì§€ ìŠ¤ìº” í•„ìˆ˜
```

---

## ğŸ¢ ì‹¤ë¬´ ì‚¬ë¡€ (íšŒì‚¬ë³„)

### Case 1: ìŠ¤íƒ€íŠ¸ì—… A (ì§ì› 10ëª…)

```
í™˜ê²½: AWS EC2 + GitHub Actions

ì„ íƒ: GHCR
ì´ìœ :
  - ì´ˆê¸° ë¹„ìš© ì ˆê° ($0 vs ECR $20/ì›”)
  - GitHub Actions ì´ë¯¸ ì‚¬ìš© ì¤‘
  - ë¹ ë¥¸ ë°°í¬ ìš°ì„  (ì„¤ì • 5ë¶„)

ê²°ê³¼: âœ… ì„±ê³µ
  - 1ë…„ê°„ ë¬¸ì œ ì—†ìŒ
  - ECR ëŒ€ë¹„ ì›” $20 ì ˆì•½
```

### Case 2: ì¤‘ê²¬ ê¸°ì—… B (ì§ì› 100ëª…, AWS ì˜¬ì¸)

```
í™˜ê²½: AWS EKS + Kubernetes + Jenkins

ì„ íƒ: ECR
ì´ìœ :
  - EKSì™€ ì™„ë²½ í†µí•©
  - VPC Endpointë¡œ í”„ë¼ì´ë¹— ë„¤íŠ¸ì›Œí¬ êµ¬ì„±
  - IAM Role ê¸°ë°˜ ì ‘ê·¼ ì œì–´
  - ì´ë¯¸ì§€ ìŠ¤ìº” ìë™í™” í•„ìš”

ê²°ê³¼: âœ… ì„±ê³µ
  - ë³´ì•ˆ ê°•í™” (ì™¸ë¶€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì˜ì¡´ ì œê±°)
  - ì „ì†¡ ì†ë„ ë¹ ë¦„ (ê°™ì€ VPC)
  - ë¹„ìš©ì€ ì›” $50 ì •ë„ (ê°ìˆ˜)
```

### Case 3: ê¸ˆìœµê¶Œ C (ì§ì› 1000ëª…+)

```
í™˜ê²½: On-premise + Private Cloud

ì„ íƒ: Harbor (Self-hosted)
ì´ìœ :
  - ì™¸ë¶€ ì„œë¹„ìŠ¤ ì‚¬ìš© ë¶ˆê°€ (ë³´ì•ˆ ì •ì±…)
  - ê°ì‚¬ ë¡œê·¸ í•„ìˆ˜
  - ì´ë¯¸ì§€ ì„œëª… (Notary) í•„ìˆ˜
  - ë©€í‹° í…Œë„Œì‹œ (íŒ€ë³„ ê²©ë¦¬)

ê²°ê³¼: âœ… ì„±ê³µ
  - ì™„ì „í•œ í†µì œê¶Œ
  - ì»´í”Œë¼ì´ì–¸ìŠ¤ ì¤€ìˆ˜
  - ìš´ì˜ íŒ€ 3ëª… í•„ìš” (ë¹„ìš© ì¦ê°€)
```

---

## ğŸ”„ ì‹¤ë¬´ì—ì„œ ECR ì“°ëŠ” ì´ìœ  (ìƒì„¸)

### 1. VPC Endpoint ì§€ì›

```
Public GHCR:
  EC2 â†’ Internet Gateway â†’ GHCR (GitHub ì„œë²„)
  âš ï¸ ì™¸ë¶€ ì¸í„°ë„· ê²½ìœ  í•„ìš”
  âš ï¸ NAT Gateway ë¹„ìš© ($0.045/ì‹œê°„ = $32/ì›”)

Private ECR:
  EC2 â†’ VPC Endpoint â†’ ECR (ê°™ì€ VPC ë‚´)
  âœ… ì¸í„°ë„· ì•ˆ ê±°ì¹¨ (ë³´ì•ˆ ê°•í™”!)
  âœ… ë¹ ë¥¸ ì†ë„ (ê°™ì€ ë°ì´í„°ì„¼í„°)
  âœ… NAT Gateway ë¶ˆí•„ìš” (ë¹„ìš© ì ˆê°!)
```

### 2. IAM í†µí•©

```
GHCR:
  - GitHub Token í•„ìš”
  - EC2ì— Token ì €ì¥ (ë³´ì•ˆ ìœ„í—˜)
  - ì£¼ê¸°ì  ê°±ì‹  í•„ìš”

ECR:
  - IAM Role ì‚¬ìš© (Token ë¶ˆí•„ìš”!)
  - EC2 Instance Profile ìë™ ì¸ì¦
  - ê¶Œí•œ ì„¸ë°€í•˜ê²Œ ì œì–´

ì˜ˆì‹œ:
  aws ecr get-login-password | docker login ...
  â†’ IAM Roleë§Œ ìˆìœ¼ë©´ ìë™!
```

### 3. ì´ë¯¸ì§€ ìŠ¤ìº”

```
ECR:
  - í‘¸ì‹œ ì‹œ ìë™ ìŠ¤ìº” (CVE ê²€ì‚¬)
  - ì·¨ì•½ì  ë°œê²¬ â†’ Lambda íŠ¸ë¦¬ê±° â†’ Slack ì•Œë¦¼
  - AWS Security Hub í†µí•©

GHCR:
  - ìˆ˜ë™ ìŠ¤ìº” í•„ìš” (Trivy ë“±)
  - ë³„ë„ CI ë‹¨ê³„ ì¶”ê°€
```

---

## ğŸ’¡ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œë‚˜ë¦¬ì˜¤

### GHCR â†’ ECR ì „í™˜ (í”„ë¡œë•ì…˜ ì „í™˜ ì‹œ)

```bash
# 1. ECR Repository ìƒì„±
aws ecr create-repository --repository-name simple-api

# 2. GHCR ì´ë¯¸ì§€ pull
docker pull ghcr.io/johnhuh619/simple-api:latest

# 3. ECRë¡œ íƒœê·¸ ë³€ê²½
docker tag ghcr.io/johnhuh619/simple-api:latest \
           123456789012.dkr.ecr.ap-northeast-2.amazonaws.com/simple-api:latest

# 4. ECR ë¡œê·¸ì¸
aws ecr get-login-password --region ap-northeast-2 | \
  docker login --username AWS --password-stdin \
  123456789012.dkr.ecr.ap-northeast-2.amazonaws.com

# 5. ECRë¡œ í‘¸ì‹œ
docker push 123456789012.dkr.ecr.ap-northeast-2.amazonaws.com/simple-api:latest

# 6. deploy-asg.yml ìˆ˜ì •
# IMAGE_REGISTRY: ghcr.io â†’ 123456789012.dkr.ecr.ap-northeast-2.amazonaws.com

# 7. Launch Template User Data ìˆ˜ì •
# docker pull ghcr.io/... â†’ docker pull 123456789012.dkr.ecr...
```

**ì†Œìš” ì‹œê°„**: 1ì‹œê°„
**ë¹„ìš© ì¦ê°€**: ì›” ~$10 (ì €ì¥ + ì „ì†¡)
**ì¥ì **: AWS ë„¤ì´í‹°ë¸Œ, ë” ë¹ ë¦„, ë” ì•ˆì „

---

## ğŸ“ ê²°ë¡ 

### S3ëŠ” Docker ì´ë¯¸ì§€ìš©ì´ ì•„ë‹™ë‹ˆë‹¤!

```
S3ëŠ”:
  âŒ Docker Registry í”„ë¡œí† ì½œ ì§€ì› ì•ˆí•¨
  âŒ docker pull/push ì•ˆë¨
  âŒ ì´ë¯¸ì§€ ë ˆì´ì–´ ê´€ë¦¬ ì•ˆí•¨
  âŒ íƒœê·¸ ê´€ë¦¬ ë¶ˆí¸

  âœ… íŒŒì¼ ì €ì¥ìš© (ë¡œê·¸, ë°±ì—…, ì •ì  íŒŒì¼)
```

### ì‹¤ë¬´ì—ì„œëŠ”?

```
1. AWS í™˜ê²½ â†’ ECR ì£¼ë¡œ ì‚¬ìš© (70%)
2. GitHub Actions â†’ GHCR ë§ì´ ì‚¬ìš© (20%)
3. ì—”í„°í”„ë¼ì´ì¦ˆ â†’ Harbor/Nexus (10%)

í˜„ì¬ í”„ë¡œì íŠ¸ëŠ”:
  - 5ì¼ ë°ëª¨ + GitHub Actions + Public repo
  â†’ GHCRì´ ìµœì  ì„ íƒ! âœ…

í”„ë¡œë•ì…˜ ì „í™˜ ì‹œ:
  - ECRë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ê¶Œì¥
  - ë¹„ìš©ë³´ë‹¤ ì•ˆì •ì„±/ì†ë„ ìš°ì„ 
```

### ì •ë‹µì€ "ìƒí™©ì— ë”°ë¼ ë‹¤ë¦„"

```
í•™ìŠµ/ë°ëª¨/ì˜¤í”ˆì†ŒìŠ¤:     GHCR ì¶”ì²œ â­
AWS í”„ë¡œë•ì…˜:           ECR ì¶”ì²œ â­â­â­
ë©€í‹° í´ë¼ìš°ë“œ:          Harbor ì¶”ì²œ â­â­
ê¸ˆìœµ/ë³´ì•ˆ ì¤‘ìš”:         Harbor + Scanner â­â­â­
```

---

**í•µì‹¬**: Container RegistryëŠ” Docker ì „ìš© ì €ì¥ì†Œì…ë‹ˆë‹¤!
S3ëŠ” ë²”ìš© íŒŒì¼ ì €ì¥ì†Œë¡œ, Docker ì´ë¯¸ì§€ìš©ìœ¼ë¡œëŠ” ì í•©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ì‹¤ë¬´ì—ì„œëŠ” **ECR (AWS í™˜ê²½)** ë˜ëŠ” **GHCR (GitHub í™˜ê²½)** ì£¼ë¡œ ì‚¬ìš©í•˜ë©°,
í˜„ì¬ í”„ë¡œì íŠ¸ëŠ” GitHub Actions + 5ì¼ ë°ëª¨ì´ë¯€ë¡œ **GHCRì´ ìµœì **ì…ë‹ˆë‹¤! ğŸ¯
